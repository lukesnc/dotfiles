#!/usr/bin/env python3
# examples: roll 1d20
#           roll 2d10 +3

import random
import argparse


def diceroll(string):
    split = string.split("d")
    ndice, val, *_ = map(int, split)
    return (string, ndice, val)


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="d&d dice roller")
    parser.add_argument("dice", type=diceroll, help="dice to roll [ex: 2d8, 1d20]")
    parser.add_argument(
        "modifier",
        nargs="?",
        default=0,
        type=int,
        help="modifier to add to roll [ex: +2, -1]",
    )
    args = parser.parse_args()

    rollstr, ndice, val = args.dice
    rolls = [random.randint(1, val) for _ in range(ndice)]
    total = sum(rolls) + args.modifier
    print("{} {} {:+} {}".format(rollstr, rolls, args.modifier, total))
